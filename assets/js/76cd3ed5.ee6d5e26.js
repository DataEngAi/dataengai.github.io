"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3736],{5788:(e,t,a)=>{a.d(t,{Iu:()=>s,yg:()=>g});var n=a(1504);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function p(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),c=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},s=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,s=p(e,["components","mdxType","originalType","parentName"]),d=c(a),m=r,g=d["".concat(l,".").concat(m)]||d[m]||u[m]||i;return a?n.createElement(g,o(o({ref:t},s),{},{components:a})):n.createElement(g,o({ref:t},s))}));function g(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=m;var p={};for(var l in t)hasOwnProperty.call(t,l)&&(p[l]=t[l]);p.originalType=e,p[d]="string"==typeof e?e:r,o[1]=p;for(var c=2;c<i;c++)o[c]=a[c];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},4644:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>p,toc:()=>c});var n=a(5072),r=(a(1504),a(5788));const i={title:"Build"},o="Building DataSQRL Projects",p={unversionedId:"reference/operations/build",id:"reference/operations/build",title:"Build",description:"This page provides an overview of how to compile, run, and debug SQRL scripts and projects using the DataSQRL command.",source:"@site/docs/reference/operations/build.md",sourceDirName:"reference/operations",slug:"/reference/operations/build",permalink:"/docs/reference/operations/build",draft:!1,editUrl:"https://github.com/DataSQRL/datasqrl.github.io/edit/main/docs/reference/operations/build.md",tags:[],version:"current",frontMatter:{title:"Build"},sidebar:"docs",previous:{title:"DataSQRL Schema",permalink:"/docs/reference/sources/schema"},next:{title:"Command Reference",permalink:"/docs/reference/operations/command"}},l={},c=[{value:"Compile",id:"compile",level:2},{value:"Run",id:"run",level:2},{value:"Debug",id:"debug",level:2},{value:"Deploy",id:"deploy",level:2}],s={toc:c},d="wrapper";function u(e){let{components:t,...a}=e;return(0,r.yg)(d,(0,n.c)({},s,a,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"building-datasqrl-projects"},"Building DataSQRL Projects"),(0,r.yg)("p",null,"This page provides an overview of how to compile, run, and debug SQRL scripts and projects using the DataSQRL command. ",(0,r.yg)("br",null),"\nThe ",(0,r.yg)("a",{parentName:"p",href:"../command"},"command documentation")," has a complete reference of the DataSQRL command and all options."),(0,r.yg)("h2",{id:"compile"},"Compile"),(0,r.yg)("p",null,"To compile an SQRL script, you invoke the DataSQRL ",(0,r.yg)("inlineCode",{parentName:"p"},"compile")," command:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"docker run --rm -v $PWD:/build datasqrl/cmd compile myscript.sqrl myapischema.graphqls\n")),(0,r.yg)("p",null,"The ",(0,r.yg)("inlineCode",{parentName:"p"},"compile")," command takes the SQRL script to compile as the first argument and an API specification as an optional second argument. If no API specification is provided, DataSQRL generates one. See ",(0,r.yg)("a",{parentName:"p",href:"../../api/overview#design"},"API Design")," for more details."),(0,r.yg)("p",null,"The command compiles the script and API specification into an integrated data product. The command creates a ",(0,r.yg)("inlineCode",{parentName:"p"},"build")," with all the build artifacts that are used during the compilation and build process (e.g. dependencies). The command writes the deployment artifacts for the compiled data product into the ",(0,r.yg)("inlineCode",{parentName:"p"},"build/deploy")," directory. Read more about deployment artifacts in the ",(0,r.yg)("a",{parentName:"p",href:"../deploy/overview"},"deployment documentation"),"."),(0,r.yg)("p",null,"DataSQRL supports ",(0,r.yg)("a",{parentName:"p",href:"../engines/overview"},"multiple engines")," and data pipeline architectures. That means, you can configure the architecture of the targeted data pipeline and what systems will execute individual components of the compiled data pipeline."),(0,r.yg)("img",{src:"/img/reference/reactive_microservice.svg",alt:"DataSQRL data pipeline architecture >",width:"50%"}),(0,r.yg)("p",null,"The figure shows a data pipeline architecture that consists of a Apache Kafka, Apache Flink, a database engine, and API server. Kafka holds the input and streaming data. Flink ingests the data, processes it, and writes the results to the database. The API server translates incoming requests into database queries and assembles the response from the returned query results."),(0,r.yg)("p",null,"The data pipeline architecture and engines are configured in the ",(0,r.yg)("a",{parentName:"p",href:"../package-config"},"package configuration"),". The DataSQRL command looks for a ",(0,r.yg)("inlineCode",{parentName:"p"},"package.json")," configuration file in the directory where it is executed. Alternatively, the package configuration file can be provided as an argument via the ",(0,r.yg)("inlineCode",{parentName:"p"},"-c")," option. Check out the ",(0,r.yg)("a",{parentName:"p",href:"../command"},"command line reference")," for all command line options."),(0,r.yg)("p",null,"If no package configuration file is provided or found, DataSQRL generates a default package configuration with the example data pipeline architecture shown above and the following engines:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"../engines/flink"},"Apache Flink")," as the stream engine"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"../engines/postgres"},"Postgres")," as the database engine"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"../engines/vertx"},"Vertx")," as the API server")),(0,r.yg)("p",null,"The package configuration contains additional compiler options and declares the dependencies of a script. Read more about ",(0,r.yg)("a",{parentName:"p",href:"../package-config"},"the package configuration")," to learn how to configure your build."),(0,r.yg)("h2",{id:"run"},"Run"),(0,r.yg)("p",null,"To run the pipeline that DataSQRL compiles from your SQRL script and API specification, execute:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"(cd build/deploy; docker compose up)\n")),(0,r.yg)("p",null,"This command executes docker-compose with the template generated by the DataSQRL compiler in the ",(0,r.yg)("inlineCode",{parentName:"p"},"build/deploy")," directory. It starts all the engines and deploys the produced deployments artifacts of the compiled data pipeline to the engines to run the entire data pipeline."),(0,r.yg)("p",null,"The API server which is exposed at ",(0,r.yg)("inlineCode",{parentName:"p"},"localhost:8888/"),". ",(0,r.yg)("br",null),"\nYou can now access the API and execute queries against it to test your script and the compiled data pipeline. See the ",(0,r.yg)("a",{parentName:"p",href:"../../api/overview#query"},"API access documentation")," for more details."),(0,r.yg)("p",null,"Use the keystroke ",(0,r.yg)("inlineCode",{parentName:"p"},"CTRL-C")," to stop the running data pipeline. This will stop all engines gracefully."),(0,r.yg)("h2",{id:"debug"},"Debug"),(0,r.yg)("p",null,"To debug a SQRL script, compile it with the ",(0,r.yg)("inlineCode",{parentName:"p"},"-d")," flag:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"docker run --rm -v $PWD:/build datasqrl/cmd compile -d myscript.sqrl myapischema.graphqls\n")),(0,r.yg)("p",null,"and then run it with:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"(cd build/deploy; docker compose up)\n")),(0,r.yg)("p",null,"In debug mode, the stream engine exports a change log of each computed table to the configured ",(0,r.yg)("a",{parentName:"p",href:"../package-config#debug"},"debug sink")," which is the ",(0,r.yg)("a",{parentName:"p",href:"../../sources/system/print"},"print sink")," by default. This allows you to see what is being computed at each step in your script."),(0,r.yg)("h2",{id:"deploy"},"Deploy"),(0,r.yg)("p",null,"When you finished development and are ready to deploy your SQRL script, check out the ",(0,r.yg)("a",{parentName:"p",href:"../deploy/overview"},"deployment options"),"."))}u.isMDXComponent=!0}}]);