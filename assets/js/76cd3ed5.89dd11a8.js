"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[712],{3905:(e,t,a)=>{a.d(t,{Zo:()=>s,kt:()=>h});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var p=n.createContext({}),c=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},s=function(e){var t=c(e.components);return n.createElement(p.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,p=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),d=c(a),m=r,h=d["".concat(p,".").concat(m)]||d[m]||u[m]||o;return a?n.createElement(h,i(i({ref:t},s),{},{components:a})):n.createElement(h,i({ref:t},s))}));function h(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=m;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[d]="string"==typeof e?e:r,i[1]=l;for(var c=2;c<o;c++)i[c]=a[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},440:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var n=a(7462),r=(a(7294),a(3905));const o={title:"Build"},i="Building SQRL Projects",l={unversionedId:"reference/operations/build",id:"reference/operations/build",title:"Build",description:"This page provides an overview of how to compile, run, and debug SQRL scripts and projects using the DataSQRL command.",source:"@site/docs/reference/operations/build.md",sourceDirName:"reference/operations",slug:"/reference/operations/build",permalink:"/docs/reference/operations/build",draft:!1,editUrl:"https://github.com/DataSQRL/datasqrl.github.io/edit/main/docs/reference/operations/build.md",tags:[],version:"current",frontMatter:{title:"Build"},sidebar:"docs",previous:{title:"DataSQRL Schema",permalink:"/docs/reference/sources/schema"},next:{title:"Command Reference",permalink:"/docs/reference/operations/command"}},p={},c=[{value:"Compile",id:"compile",level:2},{value:"Run",id:"run",level:2},{value:"Debug",id:"debug",level:2},{value:"Deploy",id:"deploy",level:2}],s={toc:c},d="wrapper";function u(e){let{components:t,...a}=e;return(0,r.kt)(d,(0,n.Z)({},s,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"building-sqrl-projects"},"Building SQRL Projects"),(0,r.kt)("p",null,"This page provides an overview of how to compile, run, and debug SQRL scripts and projects using the DataSQRL command. ",(0,r.kt)("br",null),"\nThe ",(0,r.kt)("a",{parentName:"p",href:"../command"},"command documentation")," has a complete reference of the DataSQRL command and all options."),(0,r.kt)("h2",{id:"compile"},"Compile"),(0,r.kt)("p",null,"To compile an SQRL script, you invoke the DataSQRL ",(0,r.kt)("inlineCode",{parentName:"p"},"compile")," command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"docker run --rm -v $PWD:/build datasqrl/cmd compile myscript.sqrl myapischema.graphqls\n")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"compile")," command takes the SQRL script to compile as the first argument and an API specification as an optional second argument. If no API specification is provided, DataSQRL generates one. See ",(0,r.kt)("a",{parentName:"p",href:"../../api/overview#design"},"API Design")," for more details."),(0,r.kt)("p",null,"The command compiles the script and API specification into an integrated data layer. The command creates a ",(0,r.kt)("inlineCode",{parentName:"p"},"build")," with all the build artifacts that are used during the compilation and build process (e.g. dependencies). The command writes the deployment artifacts for the compiled data layer into the ",(0,r.kt)("inlineCode",{parentName:"p"},"build/deploy")," directory. Read more about deployment artifacts in the ",(0,r.kt)("a",{parentName:"p",href:"../deploy/overview"},"deployment documentation"),"."),(0,r.kt)("p",null,"DataSQRL supports ",(0,r.kt)("a",{parentName:"p",href:"../engines/overview"},"multiple engines")," and data layer architectures. That means, you can configure the architecture of the targeted data layer and what systems will execute individual components of the compiled data layer."),(0,r.kt)("img",{src:"/img/dev/simple-pipeline.svg",alt:"Simple DataSQRL data layer architecture",width:"500"}),(0,r.kt)("p",null,"The figure above shows a simple data layer architecture that consists of a stream engine, database engine, and API server. The stream engine ingests the imported data, processes it, and writes the results to the database. The API server translates incoming requests into database queries and assembles the response from the returned query results."),(0,r.kt)("p",null,"The data layer architecture and engines are configured in the ",(0,r.kt)("a",{parentName:"p",href:"../package-config"},"package configuration"),". The DataSQRL command looks for a ",(0,r.kt)("inlineCode",{parentName:"p"},"package.json")," configuration file in the directory where it is executed. Alternatively, the package configuration file can be provided as an argument via the ",(0,r.kt)("inlineCode",{parentName:"p"},"-c")," option. Check out the ",(0,r.kt)("a",{parentName:"p",href:"../command"},"command line reference")," for all command line options."),(0,r.kt)("p",null,"If no package configuration file is provided or found, DataSQRL generates a default package configuration with the example data layer architecture shown above and the following engines:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"../engines/flink"},"Apache Flink")," as the stream engine"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"../engines/postgres"},"Postgres")," as the database engine"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"../engines/vertx"},"Vertx")," as the API server")),(0,r.kt)("p",null,"The package configuration contains additional compiler options and declares the dependencies of a script. Read more about ",(0,r.kt)("a",{parentName:"p",href:"../package-config"},"the package configuration")," to learn how to configure your build."),(0,r.kt)("h2",{id:"run"},"Run"),(0,r.kt)("p",null,"To run a SQRL script locally, execute the command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"docker run --rm -p 8888:8888 -v $PWD:/build datasqrl/cmd run  myscript.sqrl myapischema.graphqls\n")),(0,r.kt)("p",null,"This command compiles the SQRL script, starts the configured engines, and deploys the produced deployments artifacts of the compiled data layer to the engines to run the entire data layer locally."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"run")," command accepts the same arguments and options as the ",(0,r.kt)("inlineCode",{parentName:"p"},"compile")," command discussed above. In particular, it configures the engines based on the ",(0,r.kt)("a",{parentName:"p",href:"../package-config"},"package configuration"),". Review the ","[command-line documentation]"," for additional options of the ",(0,r.kt)("inlineCode",{parentName:"p"},"run")," command."),(0,r.kt)("p",null,"The run command starts the API server which listens on port ",(0,r.kt)("inlineCode",{parentName:"p"},"8888"),". The ",(0,r.kt)("inlineCode",{parentName:"p"},"-p")," option of the docker command maps the port. ",(0,r.kt)("br",null),"\nYou can now access the API and execute queries against it to test your script and the compiled data layer. See the ",(0,r.kt)("a",{parentName:"p",href:"../../api/overview#query"},"API access documentation")," for more details."),(0,r.kt)("p",null,"Use the keystroke ",(0,r.kt)("inlineCode",{parentName:"p"},"CTRL-C")," to stop the running data layer. This will stop all engines."),(0,r.kt)("h2",{id:"debug"},"Debug"),(0,r.kt)("p",null,"To debug a SQRL script, run it with the ",(0,r.kt)("inlineCode",{parentName:"p"},"-d")," flag:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"docker run --rm -p 8888:8888 -v $PWD:/build datasqrl/cmd run -d  myscript.sqrl myapischema.graphqls\n")),(0,r.kt)("p",null,"In debug mode, the stream engine exports a change log of each computed table to the configured ",(0,r.kt)("a",{parentName:"p",href:"../package-config#debug"},"debug sink")," which is the ",(0,r.kt)("a",{parentName:"p",href:"../../sources/system/print"},"print sink")," by default."),(0,r.kt)("h2",{id:"deploy"},"Deploy"),(0,r.kt)("p",null,"When you finished development and are ready to deploy your SQRL script, check out the ",(0,r.kt)("a",{parentName:"p",href:"../deploy/overview"},"deployment options"),"."))}u.isMDXComponent=!0}}]);