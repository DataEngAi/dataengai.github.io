"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8846],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>h});var r=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var l=r.createContext({}),d=function(e){var t=r.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},c=function(e){var t=d(e.components);return r.createElement(l.Provider,{value:t},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=d(a),m=n,h=p["".concat(l,".").concat(m)]||p[m]||u[m]||i;return a?r.createElement(h,o(o({ref:t},c),{},{components:a})):r.createElement(h,o({ref:t},c))}));function h(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=a.length,o=new Array(i);o[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:n,o[1]=s;for(var d=2;d<i;d++)o[d]=a[d];return r.createElement.apply(null,o)}return r.createElement.apply(null,a)}m.displayName="MDXCreateElement"},5173:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>d});var r=a(7462),n=(a(7294),a(3905));const i={title:"Data Layer"},o="What is a Data Layer?",s={unversionedId:"reference/concepts/data-layer",id:"reference/concepts/data-layer",title:"Data Layer",description:"A data layer is an abstraction within a software application that manages data storage, retrieval, and manipulation. It separates these concerns from the application's core logic for modularity and maintainability.",source:"@site/docs/reference/concepts/data-layer.md",sourceDirName:"reference/concepts",slug:"/reference/concepts/data-layer",permalink:"/docs/reference/concepts/data-layer",draft:!1,editUrl:"https://github.com/DataSQRL/datasqrl.github.io/edit/main/docs/reference/concepts/data-layer.md",tags:[],version:"current",frontMatter:{title:"Data Layer"}},l={},d=[{value:"How to Design a Reactive Data Layer",id:"how-to-design-a-reactive-data-layer",level:2},{value:"How to Implement a Reactive Data Layer",id:"how-to-implement-a-reactive-data-layer",level:2},{value:"Stream Processor: Ingestion and Processing",id:"stream-processor-ingestion-and-processing",level:3},{value:"Database",id:"database",level:3},{value:"Server",id:"server",level:3},{value:"Deploying a Data layer",id:"deploying-a-data-layer",level:2},{value:"Faster Way to Build Data layers",id:"faster-way-to-build-data-layers",level:2}],c={toc:d},p="wrapper";function u(e){let{components:t,...a}=e;return(0,n.kt)(p,(0,r.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"what-is-a-data-layer"},"What is a Data Layer?"),(0,n.kt)("p",null,"A data layer is an abstraction within a software application that manages data storage, retrieval, and manipulation. It separates these concerns from the application's core logic for modularity and maintainability."),(0,n.kt)("p",null,"For managing application state, you use a transactional data layer with a database and an object-relational mapper (ORM) or database abstraction library."),(0,n.kt)("p",null,"For ",(0,n.kt)("a",{parentName:"p",href:"../data-product"},"data products")," that require executing data-intensive computations quickly in response to events or external data, you use a reactive data layer. "),(0,n.kt)("p",null,"This page outlines the architecture and implementations steps for building a reactive data layer."),(0,n.kt)("h2",{id:"how-to-design-a-reactive-data-layer"},"How to Design a Reactive Data Layer"),(0,n.kt)("p",null,"To efficiently and quickly execute data-intensive computations, a data layer consists of the following components:"),(0,n.kt)("img",{src:"/img/reference/reactive_data_layer.svg",alt:"Data Layer Architecture >",width:"30%"}),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Stream Processor"),": A framework for running the consecutive data processing steps from data ingestion (i.e. reading data off the queue or from external data systems), via data transformation, to writing the results to the database. A processing framework handles all the scheduling and execution of tasks."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Database"),": Stores the pre-processed data and computes results to queries on demand."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Server"),": Exposes the results through an API and writes incoming data to the queue."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Queue"),": A persisted message queue (or log) is a robust and scalable piece of data infrastructure to temporarily store data and process it asynchronously.")),(0,n.kt)("p",null,"The diagram shows how the components combine into the architecture of a data layer. The data flows through the architecture as follows: "),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"The server writes incoming data to the queue. "),(0,n.kt)("li",{parentName:"ul"},"The stream processor picks data off the queue, processes the data, writes intermediate computations back to the queue, and the pre-processed result into the database. "),(0,n.kt)("li",{parentName:"ul"},"The server queries the database for the final result which is served back to the user or external consumer.")),(0,n.kt)("h2",{id:"how-to-implement-a-reactive-data-layer"},"How to Implement a Reactive Data Layer"),(0,n.kt)("p",null,"The exact implementation steps for building a data layer depend on the chosen technologies for each of the four components of the data layer."),(0,n.kt)("p",null,"Below, we outline a high-level blueprint for the implementation steps you take to implement a data layer."),(0,n.kt)("img",{src:"/img/index/withoutDataSQRL.svg",alt:"Steps for Building a Data layer",width:"100%"}),(0,n.kt)("h3",{id:"stream-processor-ingestion-and-processing"},"Stream Processor: Ingestion and Processing"),(0,n.kt)("p",null,"The following steps need to be implemented for retrieving and preprocessing the data:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Implement or configure access to data sources: Connect to the queue or log carrying the input data. In addition, identify and access additional data sources like databases, APIs, or files, needed for data processing. Configure connection settings, authentication, and authorization as required.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Implement data synchronization: Develop mechanisms to retrieve data in real-time, determine timestamps and order, and handle data delays and retrieval failures to ensure data consistency and reliability.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Validate and clean input data: Inspect incoming data for correctness and consistency, handle errors for malformed data, and apply data cleansing techniques to ensure data quality.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Preprocess data: Transform and structure input data to meet use case requirements by performing tasks like filtering, normalizing, data extraction, or data flattening.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Write data to the database: Efficiently store the processed data in the database, handle failures and database overload, and ensure data durability and availability."))),(0,n.kt)("h3",{id:"database"},"Database"),(0,n.kt)("p",null,"The database component stores the pre-processed data and makes it available for querying by the server. These are the steps to set up and configure the database:"),(0,n.kt)("ol",{start:6},(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Design database schema: Create an organized and optimized structure to store data, considering factors like normalization, data types, and relationships among entities.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Implement queries: Develop queries to retrieve, analyze, and manipulate data based on use case requirements, using appropriate query languages and techniques.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Determine index structures: Design and implement indexing strategies to optimize query performance and reduce database response time.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Materialize slow queries: Identify slow and costly queries, and partially materialize result sets to improve performance by caching and reusing query results."))),(0,n.kt)("h3",{id:"server"},"Server"),(0,n.kt)("p",null,"Finally, to serve the processed data to users or consuming systems requires the following:"),(0,n.kt)("ol",{start:10},(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Design API specification: Define a clear and comprehensive API specification based on use case requirements, including endpoints, request/response formats, and authentication methods.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Map API to database queries: Create a mapping between API endpoints and corresponding database queries to efficiently retrieve and serve data to clients.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Implement API: Develop the API server to handle incoming requests, batch database queries, assemble result sets, and efficiently manage I/O operations.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Develop API test suite: Create a comprehensive suite of tests to validate the functionality, performance, and correctness of the data layer, ensuring that it meets use case requirements and conforms to the API specification."))),(0,n.kt)("h2",{id:"deploying-a-data-layer"},"Deploying a Data layer"),(0,n.kt)("p",null,"There is more work we need to do to get our data layer ready for production:"),(0,n.kt)("ol",{start:14},(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Queue Optimization: To ensure smooth operations in production configure the queue for the expected workload. If high performance is required, use a schema (e.g. Avro) to encode the messages in the queue for faster serialization and smaller message size.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Scale Testing and optimization: Conduct performance tests simulating real-world conditions, including varying levels of data volume, velocity, and complexity, to ensure the data layer can handle expected workloads. Identify and address potential bottlenecks, optimize processing and storage operations, and fine-tune configuration settings to achieve optimal performance and resource utilization. Perform load and stress tests to assess the layer's resilience under high loads and determine its breaking points.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Implementing observability across the entire layer: Integrate monitoring, logging, and tracing capabilities throughout the layer to provide visibility into its performance, health, and behavior. Set up appropriate metrics, log levels, and trace spans to gather data on system performance, error rates, and resource usage. Configure alerting mechanisms to notify relevant stakeholders of potential issues or anomalies in the layer. Observability allows for proactive issue detection, faster troubleshooting, and improved overall reliability.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Building deployment artifacts: Package the data layer components, including code, configurations, and dependencies, into deployable artifacts such as Docker containers, serverless function packages, or platform-specific bundles. Ensure that the artifacts are versioned and built in a consistent and reproducible manner using tools like continuous integration and build automation systems. Building deployment artifacts simplifies deployment, rollback, and dependency management in the target environment.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Automating the deployment process: Establish a streamlined and automated deployment process using continuous integration and continuous deployment (CI/CD) tools and practices. Configure automated tests, builds, and deployments triggered by code changes or other events. Implement infrastructure as code (IaC) principles to manage and provision infrastructure resources, ensuring a consistent and repeatable environment setup. Automating the deployment process minimizes human error, accelerates development cycles, and enables rapid iteration and updates to the data layer."))),(0,n.kt)("h2",{id:"faster-way-to-build-data-layers"},"Faster Way to Build Data layers"),(0,n.kt)("p",null,"Sometimes you need to build custom data layers and have to shoulder all the work outlined above."),(0,n.kt)("p",null,"We believe - and of course we are highly biased - that DataSQRL is good enough for most data layers and can save you a ton of work. DataSQRL is a compiler and build tool for data layers that generates the artifacts that comprise a data layer."),(0,n.kt)("p",null,"If you want to learn more about building data layers with DataSQRL we recommend you start with the ",(0,n.kt)("a",{parentName:"p",href:"/docs/getting-started/quickstart"},"Quickstart tutorial"),"."),(0,n.kt)("p",null,"No matter which route you choose, we wish you best of luck and would love to welcome you in ",(0,n.kt)("a",{parentName:"p",href:"/community"},"our community")," of data builders."))}u.isMDXComponent=!0}}]);