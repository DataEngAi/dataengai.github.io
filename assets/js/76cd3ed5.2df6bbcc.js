"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[712],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),s=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=s(e.components);return a.createElement(l.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,c=p(e,["components","mdxType","originalType","parentName"]),d=s(n),m=r,h=d["".concat(l,".").concat(m)]||d[m]||u[m]||o;return n?a.createElement(h,i(i({ref:t},c),{},{components:n})):a.createElement(h,i({ref:t},c))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=m;var p={};for(var l in t)hasOwnProperty.call(t,l)&&(p[l]=t[l]);p.originalType=e,p[d]="string"==typeof e?e:r,i[1]=p;for(var s=2;s<o;s++)i[s]=n[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},440:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>p,toc:()=>s});var a=n(7462),r=(n(7294),n(3905));const o={title:"Build"},i="Building SQRL Projects",p={unversionedId:"reference/operations/build",id:"reference/operations/build",title:"Build",description:"This page provides an overview of how to compile, run, and debug SQRL scripts and projects using the DataSQRL command.",source:"@site/docs/reference/operations/build.md",sourceDirName:"reference/operations",slug:"/reference/operations/build",permalink:"/docs/reference/operations/build",draft:!1,editUrl:"https://github.com/DataSQRL/datasqrl.github.io/edit/main/docs/docs/reference/operations/build.md",tags:[],version:"current",frontMatter:{title:"Build"},sidebar:"docs",previous:{title:"DataSQRL Schema",permalink:"/docs/reference/sources/schema"},next:{title:"Command Reference",permalink:"/docs/reference/operations/command"}},l={},s=[{value:"Compile",id:"compile",level:2},{value:"Run",id:"run",level:2},{value:"Debug",id:"debug",level:2},{value:"Deploy",id:"deploy",level:2}],c={toc:s},d="wrapper";function u(e){let{components:t,...n}=e;return(0,r.kt)(d,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"building-sqrl-projects"},"Building SQRL Projects"),(0,r.kt)("p",null,"This page provides an overview of how to compile, run, and debug SQRL scripts and projects using the DataSQRL command. ",(0,r.kt)("br",null),"\nThe ",(0,r.kt)("a",{parentName:"p",href:"command"},"command documentation")," has a complete reference of the DataSQRL command and all options."),(0,r.kt)("h2",{id:"compile"},"Compile"),(0,r.kt)("p",null,"To compile an SQRL script, you invoke the DataSQRL ",(0,r.kt)("inlineCode",{parentName:"p"},"compile")," command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"docker run -v $PWD:/build datasqrl/datasqrl-cmd compile myscript.sqrl myapischema.graphqls\n")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"compile")," command takes the SQRL script to compile as the first argument and an API specification as an optional second argument. If no API specification is provided, DataSQRL generates one. See ",(0,r.kt)("a",{parentName:"p",href:"../api/overview#design"},"API Design")," for more details."),(0,r.kt)("p",null,"The command compiles the script and API specification into an integrated data pipeline and produces the deployment artifacts for the compiled pipeline in the ",(0,r.kt)("inlineCode",{parentName:"p"},"deploy/")," directory. "),(0,r.kt)("p",null,"DataSQRL supports ",(0,r.kt)("a",{parentName:"p",href:"engines/overview"},"multiple engines")," and pipeline topologies. That means, you can configure the structure of the resulting data pipeline and what systems you want to execute individual components of the pipeline."),(0,r.kt)("img",{src:"/img/dev/simple-pipeline.svg",alt:"Simple DataSQRL pipeline topology",width:"500"}),(0,r.kt)("p",null,"The figure above shows an example pipeline topology that consists of a stream engine, database engine, and API server. The stream engine ingests the imported data, processes it, and writes the results to the database. The API server translates incoming requests into database queries and assembles the response from the returned query results."),(0,r.kt)("p",null,"The pipeline topology and engines are configured in the ",(0,r.kt)("a",{parentName:"p",href:"package-config"},"package configuration"),". The DataSQRL command looks for a ",(0,r.kt)("inlineCode",{parentName:"p"},"package.json")," configuration file in the directory where it is executed. Alternatively, the package configuration file can be provided as an argument via the ",(0,r.kt)("inlineCode",{parentName:"p"},"-c")," option. Check out the ",(0,r.kt)("a",{parentName:"p",href:"command"},"command line reference")," for all command line options."),(0,r.kt)("p",null,"If no package configuration file is provided or found, DataSQRL generates a default package configuration with the example pipeline topology shown above and the following engines:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"engines/flink"},"Apache Flink")," as the stream engine"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"engines/postgres"},"Postgres")," as the database engine"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"engines/vertx"},"Vertx")," as the API server")),(0,r.kt)("p",null,"The package configuration contains additional compiler options and declares the dependencies of a script. Read more about ",(0,r.kt)("a",{parentName:"p",href:"package-config"},"the package configuration")," to learn how to configure your build."),(0,r.kt)("h2",{id:"run"},"Run"),(0,r.kt)("p",null,"To run a SQRL script locally, execute the command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"docker run -p 8888:8888 -v $PWD:/build datasqrl/datasqrl-cmd run  myscript.sqrl myapischema.graphqls\n")),(0,r.kt)("p",null,"This command compiles the SQRL script, starts the configured engines, and deploys the produced deployments artifacts of the compiled data pipeline on the engines to run the entire pipeline locally."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"run")," command accepts the same arguments and options as the ",(0,r.kt)("inlineCode",{parentName:"p"},"compile")," command discussed above. In particular, it configures the engines based on the ",(0,r.kt)("a",{parentName:"p",href:"package-config"},"package configuration"),". Review the ","[command-line documentation]"," for additional options of the ",(0,r.kt)("inlineCode",{parentName:"p"},"run")," command."),(0,r.kt)("p",null,"The run command starts the API server which listens on port ",(0,r.kt)("inlineCode",{parentName:"p"},"8888"),". The ",(0,r.kt)("inlineCode",{parentName:"p"},"-p")," option of the docker command maps the port. ",(0,r.kt)("br",null),"\nYou can now access the API and execute queries against it to test your script and the compiled data pipeline. See the ",(0,r.kt)("a",{parentName:"p",href:"../api/overview#query"},"API access documentation")," for more details."),(0,r.kt)("p",null,"Use the keystroke ",(0,r.kt)("inlineCode",{parentName:"p"},"CTRL-C")," to stop the running pipeline. This will stop all engines."),(0,r.kt)("h2",{id:"debug"},"Debug"),(0,r.kt)("p",null,"To debug a SQRL script, run it with the ",(0,r.kt)("inlineCode",{parentName:"p"},"-d")," flag:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"docker run -p 8888:8888 -v $PWD:/build datasqrl/datasqrl-cmd run -d  myscript.sqrl myapischema.graphqls\n")),(0,r.kt)("p",null,"In debug mode, the stream engine exports a change log of each computed table to the configured ",(0,r.kt)("a",{parentName:"p",href:"package-config#debug"},"debug sink")," which is the ",(0,r.kt)("a",{parentName:"p",href:"../sources/system/print"},"print sink")," by default."),(0,r.kt)("h2",{id:"deploy"},"Deploy"),(0,r.kt)("p",null,"When you finished development and are ready to deploy your SQRL script, check out the ",(0,r.kt)("a",{parentName:"p",href:"deploy/overview"},"deployment options"),"."))}u.isMDXComponent=!0}}]);